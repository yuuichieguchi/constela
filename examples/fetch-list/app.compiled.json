{"version":"1.0","state":{"users":{"type":"list","initial":[]},"loading":{"type":"string","initial":"idle"},"error":{"type":"string","initial":""}},"actions":{"fetchUsers":{"name":"fetchUsers","steps":[{"do":"set","target":"loading","value":{"expr":"lit","value":"loading"}},{"do":"set","target":"error","value":{"expr":"lit","value":""}},{"do":"fetch","url":{"expr":"lit","value":"https://jsonplaceholder.typicode.com/users"},"method":"GET","result":"data","onSuccess":[{"do":"set","target":"users","value":{"expr":"var","name":"data"}},{"do":"set","target":"loading","value":{"expr":"lit","value":"done"}}],"onError":[{"do":"set","target":"error","value":{"expr":"var","name":"error"}},{"do":"set","target":"loading","value":{"expr":"lit","value":"error"}}]}]},"clearUsers":{"name":"clearUsers","steps":[{"do":"set","target":"users","value":{"expr":"lit","value":[]}},{"do":"set","target":"loading","value":{"expr":"lit","value":"idle"}}]}},"view":{"kind":"element","tag":"div","props":{"className":{"expr":"lit","value":"fetch-app"}},"children":[{"kind":"element","tag":"h1","children":[{"kind":"text","value":{"expr":"lit","value":"Constela Fetch Example"}}]},{"kind":"element","tag":"div","props":{"className":{"expr":"lit","value":"actions"}},"children":[{"kind":"element","tag":"button","props":{"onClick":{"event":"click","action":"fetchUsers"}},"children":[{"kind":"text","value":{"expr":"lit","value":"Fetch Users"}}]},{"kind":"element","tag":"button","props":{"className":{"expr":"lit","value":"secondary"},"onClick":{"event":"click","action":"clearUsers"}},"children":[{"kind":"text","value":{"expr":"lit","value":"Clear"}}]}]},{"kind":"if","condition":{"expr":"bin","op":"==","left":{"expr":"state","name":"loading"},"right":{"expr":"lit","value":"loading"}},"then":{"kind":"element","tag":"p","props":{"className":{"expr":"lit","value":"loading"}},"children":[{"kind":"text","value":{"expr":"lit","value":"Loading..."}}]}},{"kind":"if","condition":{"expr":"bin","op":"==","left":{"expr":"state","name":"loading"},"right":{"expr":"lit","value":"error"}},"then":{"kind":"element","tag":"p","props":{"className":{"expr":"lit","value":"error"}},"children":[{"kind":"text","value":{"expr":"lit","value":"Error: "}},{"kind":"text","value":{"expr":"state","name":"error"}}]}},{"kind":"element","tag":"ul","props":{"className":{"expr":"lit","value":"user-list"}},"children":[{"kind":"each","items":{"expr":"state","name":"users"},"as":"user","body":{"kind":"element","tag":"li","children":[{"kind":"text","value":{"expr":"var","name":"user","path":"name"}},{"kind":"text","value":{"expr":"lit","value":" - "}},{"kind":"text","value":{"expr":"var","name":"user","path":"email"}}]},"index":"index"}]}]}}